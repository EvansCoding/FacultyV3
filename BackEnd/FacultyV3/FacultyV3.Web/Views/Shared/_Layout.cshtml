<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Khoa Kỹ thuật - Công nghệ</title>

    @{ 
        Html.RenderAction("MetaView", "Confirguration", new { Area = String.Empty });
    }
   
    <!-- Favicon -->
    <link rel="shortcut icon" href="~/Content/Client/assets/img/logo/logokonen.ico" type="image/x-icon" />

    @Styles.Render("~/css/client")
</head>

<body>

    @{
        Html.RenderAction("MessengerView", "Confirguration", new { Area = String.Empty });
    }
    <!--START SCROLL TOP BUTTON -->
    <a class="scrollToTop" href="#">
        <i class="fa fa-angle-up"></i>
    </a>

    <header>
        <div class="container">
            <div class="row" style="color: slategrey; width: 10px;"></div>
        </div>
    </header>
    <!-- End header  -->
    <!-- Start menu -->
    @{
        Html.RenderAction("_menu", "Home", new { Area = String.Empty });
    }
    <!-- End menu -->
    <!-- Start search box -->
    <div id="mu-search">
        <div class="mu-search-area">
            <button class="mu-search-close">
                <span class="fa fa-close"></span>
            </button>
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <form class="mu-search-form">
                            <input type="search" placeholder="Type Your Keyword(s) & Hit Enter" />
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End search box -->
    @RenderBody()
    <!-- Start footer -->
    @{
        Html.RenderAction("_footer", "Home", new { Area = String.Empty });
    }
    <!-- End footer -->
    <!-- start Icons Nav Left-->
    @{
        Html.RenderAction("_sticky", "Home", new { Area = String.Empty });
    }
    <script src="~/Scripts/jquery-3.4.1.min.js"></script>
    @Scripts.Render("~/script/client")
    <script src="~/Scripts/jquery.signalR-2.2.2.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <script>

        $(function () {
            var cHub = $.connection.HitCounter;
            cHub.client.UpdateCount = function (count) {
                $('#counter').text(count);
                ShowTotal();
            }

            setTimeout(function () {
                $.connection.hub.start().done(function () {
             
                    console.log($.connection.hub.id);
                    TotalAccess();
                });
            },
                0);
            $.connection.hub.logging = true;
        });

        function TotalAccess() {
            $.ajax({
                type: "POST",
                url: "/Confirguration/UpdateTotal",
                success: function (response) {
                    if (response.success) {
                        $('#total').text(response.total);
                    }
                }
            });
            return false;
        }

        function ShowTotal() {
            $.ajax({
                type: "GET",
                url: "/Confirguration/ShowTotal",
                success: function (response) {
                    if (response.success) {
                        $('#total').text(response.total);
                    }
                }
            });
            return false;
        }
    </script>
</body>
</html>
